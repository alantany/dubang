# 都邦健康小程序

一个基于微信小程序的健康服务咨询应用。

## 功能特点

- 语音输入：支持按住说话功能，方便用户进行语音交互
- 文字输入：提供文本输入框，支持文字方式咨询
- 智能问答：集成Coze API，提供智能对话服务
- 图文展示：根据用户咨询内容展示相关的健康产品和服务信息

## 技术实现

### 语音功能
- 使用微信小程序原生的录音API（RecorderManager）
- 支持录音、播放等基础功能
- 提供录音状态反馈，优化用户体验

### 智能对话
- 集成Coze API实现智能对话
- API调用示例：
```javascript
wx.request({
  url: 'https://api.coze.cn/open_api/v2/chat',
  method: 'POST',
  header: {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
  },
  data: {
    conversation_id: 'CONVERSATION_ID',
    bot_id: 'BOT_ID',
    user: 'USER_ID',
    query: '用户输入内容',
    stream: false
  }
})
```

### 界面组件
- 使用自定义组件实现界面模块化
- display-area：展示图片和描述信息
- 语音按钮：实现长按说话功能

## 问题解决记录

### 图片显示问题
- 问题：图片无法正常显示
- 解决：检查图片路径，确保路径正确且图片存在

### 按钮点击问题
- 问题：按钮点击事件无响应
- 解决：重构事件绑定方式，简化组件结构

### API调用问题
- 问题：uploadFile接口域名校验错误
- 解决：使用Coze官方API进行对话功能实现

## 开发笔记

1. 组件化开发
   - 将界面拆分为可复用的组件
   - 实现组件间的数据传递和事件通信

2. 状态管理
   - 使用Page的data属性管理状态
   - 实现录音、对话等状态的实时更新

3. 错误处理
   - 添加全局的错误处理机制
   - 为用户提供友好的错误提示

## 后续优化计划

1. 优化语音识别准确率
2. 增加更多健康服务类型
3. 优化界面交互体验
4. 添加用户个性化推荐功能

## 使用说明

1. 克隆项目到本地
2. 在微信开发者工具中导入项目
3. 配置Coze API密钥
4. 编译运行即可使用

## 注意事项

1. 需要在微信开发者工具中开启相关权限
2. 注意保护API密钥等敏感信息
3. 遵循微信小程序的发布规范